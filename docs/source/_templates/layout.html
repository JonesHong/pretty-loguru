{% extends "!layout.html" %}

{% block extrahead %}
{{ super() }}
<style>
    /* 語言切換器樣式 */
    .language-switcher {
        background-color: #f8f9fa;
        border-radius: 4px;
        margin-bottom: 1.5em;
        padding: 12px 15px;
        border-left: 3px solid #2980b9;
        font-size: 0.9em;
    }
    
    .language-switcher ul {
        margin: 0;
        padding: 0;
        list-style: none;
        display: flex;
    }
    
    .language-switcher li {
        margin-right: 20px;
    }
    
    .language-switcher a {
        color: #2980b9;
        text-decoration: none;
        transition: color 0.2s;
    }
    
    .language-switcher a:hover {
        color: #3091d1;
        text-decoration: underline;
    }
    
    .language-switcher .active {
        font-weight: bold;
        color: #343131;
    }
    
    /* 響應式設計 */
    @media screen and (max-width: 768px) {
        .language-switcher ul {
            flex-direction: column;
        }
        
        .language-switcher li {
            margin-bottom: 8px;
        }
    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 語言切換器 JavaScript
        function setupLanguageSwitcher() {
            // 獲取當前URL路徑
            const path = window.location.pathname;
            
            // 檢查當前是哪種語言
            const isEnglish = path.includes('/en/');
            
            // 獲取語言切換器中的連結
            const links = document.querySelectorAll('.language-switcher a');
            
            if (links.length > 0) {
                links.forEach(function(link) {
                    if (link.textContent.trim() === 'English' && !isEnglish) {
                        // 修改英文連結
                        const basePath = path.replace('/zh_TW/', '/');
                        link.href = basePath.replace('/html/', '/html/en/');
                    } else if (link.textContent.trim() === '繁體中文' && isEnglish) {
                        // 修改中文連結
                        const basePath = path.replace('/en/', '/');
                        link.href = basePath.replace('/html/', '/html/zh_TW/');
                    }
                });
            }
        }
        
        // 執行語言切換器設置
        setupLanguageSwitcher();
    });
</script>
{% endblock %}

{% block sidebar1 %}
{{ super() }}
<div class="sidebar-block">
    <div class="sidebar-wrapper">
        <h2>{{ _('Languages') }}</h2>
        <div class="language-switcher">
            <ul>
                {% if language == 'en' %}
                    <li><a href="#">繁體中文</a></li>
                    <li class="active">English</li>
                {% else %}
                    <li class="active">繁體中文</li>
                    <li><a href="#">English</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}